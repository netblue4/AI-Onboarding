<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Security Risk Assessment</title>
    <style>
        /* Styles omitted for brevity */
    </style>
</head>
<body>

<div class="container">
    <h1>AI Security Risk Assessment</h1>
    <p>Based on ISO/IEC 23894 Information technology — Artificial intelligence — Guidance on risk management</p>
    <div class="accordion" id="accordion">
    </div>
</div>

<script>
fetch('Principle_phase_risk_control.json')
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok ' + response.statusText);
    }
    return response.json();
  })
  .then(item => {
    const accordion = document.getElementById('accordion');

    const group = document.createElement('div');
    group.className = 'group';

    const header = document.createElement('button');
    header.className = 'header';
    header.textContent = item.principle || 'Unnamed Principle';
    group.appendChild(header);

    const panel = document.createElement('div');
    panel.className = 'panel';
    const tableContainer = document.createElement('div');
    tableContainer.className = 'table-container';

    const table = document.createElement('table');
    const thead = table.createTHead();
    const headerRow = thead.insertRow();

    ['Principle', 'Risk', 'Control'].forEach(headerText => {
      const th = document.createElement('th');
      th.textContent = headerText;
      headerRow.appendChild(th);
    });

    const tbody = table.createTBody();
    const row = tbody.insertRow();
    row.insertCell().innerHTML = item.principle;
    row.insertCell().innerHTML = item.risk;
    row.insertCell().innerHTML = item.control;

    tableContainer.appendChild(table);
    panel.appendChild(tableContainer);
    group.appendChild(panel);
    accordion.appendChild(group);

    header.addEventListener('click', function () {
      this.classList.toggle('active');
      const panel = this.nextElementSibling;
      if (panel.style.maxHeight) {
        panel.style.maxHeight = null;
        panel.style.padding = "0 18px";
      } else {
        panel.style.maxHeight = panel.scrollHeight + "px";
        panel.style.padding = "15px 18px";
      }
    });
  })
  .catch(error => {
    const accordion = document.getElementById('accordion');
    accordion.innerHTML = `
      <p style="color: red;"><strong>Failed to load risk assessment data.</strong></p>
      <p style="color: #d9534f; border: 1px solid #d9534f; padding: 10px; border-radius: 5px;">
        <strong>Error Details:</strong> ${error.message}
      </p>
      <p>This can happen if the JSON file cannot be found (check the filename and path) or if there's a CORS or local server issue.</p>
    `;
  });
</script>

</body>
</html>
